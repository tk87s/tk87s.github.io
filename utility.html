<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Utility</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Sofia&effect=neon" rel="stylesheet" type="text/css">
        <link rel="stylesheet"  type="text/css" href="./style.css">

        <script src="index.js" defer></script>

    </head>
    <body class="p-3 bg-primary">
        <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
            <a class="navbar-brand font-effect-neon" href="./index.html">Index</a>
            <ul class="navbar-nav mr-auto">
                <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Projects</a></li>
            </ul>
        </nav>

        <main class="p-4 mb-2">
            <article>
                <h3>calculator</h3>
                <div>
                    <textarea id="input" cols="100" rows=3 style="overflow:scroll;">[...Array(10).keys()].reduce((sum, i) => sum + Math.pow(2, i), 0)</textarea>
                </div>
                <div>
                    <button class="btn btn-primary btn-sm" id="calc_run">run</button>
                    <span>result : <span class="font-weight-bold" id="result"></span></span>
                </div>
                <div class="mt-2">
                    <button class="btn btn-primary btn-sm" id="clear_results">clear results</button>
                </div>
                <table id="result_table" class="table bg-white">
                    <caption>Past Results</caption>
                    <thead>
                        <tr>
                            <th style="width: 10%" scope="col">#</th>
                            <th style="width: 70%" scope="col">Expression</th>
                            <th style="width: 20%" scope="col">Result</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </article>
        </main>

        <footer>
            <p>Â©Copyright 2021 by ts. All rights reversed.</p>
        </footer>
        <script>
            let past_results = [];
            document.getElementById("calc_run").addEventListener("click", event => {
                let inpt = document.getElementById("input").value;
                let result = Function('"use strict";return (' + inpt + ');')();
                document.getElementById("result").innerHTML = result;
                let table = document.getElementById('result_table').getElementsByTagName('tbody')[0];
                let row = table.insertRow(0);
                row.insertCell(-1).innerHTML = table.rows.length;
                row.insertCell(-1).innerHTML = inpt;
                row.insertCell(-1).innerHTML = result;
            });
            document.getElementById("clear_results").addEventListener("click", event => {
                let table = document.getElementById('result_table').getElementsByTagName('tbody')[0];
                while (table.rows.length > 0) table.deleteRow(0);
                past_results.splice(0);
            });
        </script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    </body>
</html>